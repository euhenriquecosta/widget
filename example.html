<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="color-scheme" content="dark" />
  <title>Exemplo - Chat Widget (Build)</title>
  <link rel="stylesheet" href="./dist/style.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #333;
      text-align: center;
    }

    p {
      line-height: 1.6;
      color: #666;
    }

    .config-section {
      margin: 20px 0;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }

    button:hover {
      background: #2563eb;
    }

    .config-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }

    .config-item {
      background: white;
      padding: 15px;
      border-radius: 4px;
      border: 1px solid #ddd;
    }

    .config-item h4 {
      margin: 0 0 10px 0;
      color: #333;
    }

    .config-item p {
      margin: 0;
      font-size: 14px;
      color: #666;
    }

    .debug-info {
      background: #f0f0f0;
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-family: monospace;
      font-size: 12px;
    }

    .trigger-examples {
      margin: 20px 0;
    }

    .trigger-example {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 15px;
      margin: 10px 0;
      border-radius: 4px;
    }

    .trigger-example h4 {
      color: #1976d2;
      margin: 0 0 10px 0;
    }

    .trigger-example code {
      background: #f5f5f5;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: monospace;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üöÄ Chat Widget - Novas Op√ß√µes de Acionamento</h1>
    <p>Esta p√°gina demonstra as novas funcionalidades de acionamento autom√°tico do widget de chat.</p>

    <div class="trigger-examples">
      <h3>üéØ Op√ß√µes de Acionamento Dispon√≠veis:</h3>
      
      <div class="trigger-example">
        <h4>1. Abertura Imediata</h4>
        <p>O widget abre automaticamente assim que a p√°gina carrega.</p>
        <code>trigger: 'immediate'</code>
        <button onclick="initImmediateWidget()">Testar Abertura Imediata</button>
      </div>

      <div class="trigger-example">
        <h4>2. Abertura com Delay</h4>
        <p>O widget abre ap√≥s um tempo definido (padr√£o: 3 segundos).</p>
        <code>trigger: 'delayed', autoOpenDelay: 5000</code>
        <button onclick="initDelayedWidget()">Testar Abertura com Delay (5s)</button>
      </div>

      <div class="trigger-example">
        <h4>3. Abertura por Scroll</h4>
        <p>O widget abre quando o usu√°rio rola 50% da p√°gina.</p>
        <code>trigger: 'scroll', scrollThreshold: 50</code>
        <button onclick="initScrollWidget()">Testar Abertura por Scroll</button>
      </div>

      <div class="trigger-example">
        <h4>4. Abertura por Exit Intent</h4>
        <p>O widget abre quando o mouse sai da janela (tentativa de sair).</p>
        <code>trigger: 'exit-intent'</code>
        <button onclick="initExitIntentWidget()">Testar Exit Intent</button>
      </div>

      <div class="trigger-example">
        <h4>5. Abertura por Bot√£o (Padr√£o)</h4>
        <p>O widget abre apenas quando o usu√°rio clica no bot√£o flutuante.</p>
        <code>trigger: 'button'</code>
        <button onclick="initButtonWidget()">Testar Abertura por Bot√£o</button>
      </div>
    </div>

    <div class="config-section">
      <h3>üîß Controles</h3>
      <button onclick="destroyAllWidgets()">Destruir Todos os Widgets</button>
      <button onclick="location.reload()">Recarregar P√°gina</button>
    </div>

    <div class="debug-info" id="debug-info">
      <strong>Debug Info:</strong><br />
      Widget n√£o inicializado
    </div>

    <!-- Adiciona conte√∫do para testar scroll -->
    <div style="height: 2000px; background: linear-gradient(to bottom, #f0f0f0, #e0e0e0); padding: 20px; margin-top: 40px;">
      <h3>üìú √Årea de Scroll para Teste</h3>
      <p>Role para baixo para testar o trigger de scroll. O widget abrir√° automaticamente quando voc√™ atingir 50% da p√°gina.</p>
      <p>Este conte√∫do √© apenas para demonstrar a funcionalidade de scroll.</p>
    </div>
  </div>

  <!-- Importa o bundle do widget -->
  <script src="./dist/chat-widget.umd.cjs"></script>
  <script>
    let currentWidget = null;

    function updateDebugInfo(message) {
      document.getElementById('debug-info').innerHTML = `<strong>Debug Info:</strong><br />${message}`;
    }

    function initImmediateWidget() {
      destroyAllWidgets();
      currentWidget = ChatWidget.initWidget({
        title: "Abertura Imediata",
        position: "bottom-right",
        primaryColor: "#10b981",
        theme: "dark",
        trigger: "immediate"
      });
      updateDebugInfo("Widget configurado para abertura imediata");
    }

    function initDelayedWidget() {
      destroyAllWidgets();
      currentWidget = ChatWidget.initWidget({
        title: "Abertura com Delay",
        position: "bottom-right",
        primaryColor: "#f59e0b",
        theme: "dark",
        trigger: "delayed",
        autoOpenDelay: 5000
      });
      updateDebugInfo("Widget configurado para abertura em 5 segundos");
    }

    function initScrollWidget() {
      destroyAllWidgets();
      currentWidget = ChatWidget.initWidget({
        title: "Abertura por Scroll",
        position: "bottom-right",
        primaryColor: "#8b5cf6",
        theme: "dark",
        trigger: "scroll",
        scrollThreshold: 50
      });
      updateDebugInfo("Widget configurado para abertura ao rolar 50% da p√°gina");
    }

    function initExitIntentWidget() {
      destroyAllWidgets();
      currentWidget = ChatWidget.initWidget({
        title: "Exit Intent",
        position: "bottom-right",
        primaryColor: "#ef4444",
        theme: "dark",
        trigger: "exit-intent"
      });
      updateDebugInfo("Widget configurado para abertura por exit intent");
    }

    function initButtonWidget() {
      destroyAllWidgets();
      currentWidget = ChatWidget.initWidget({
        title: "Abertura por Bot√£o",
        position: "bottom-right",
        primaryColor: "#3b82f6",
        theme: "dark",
        trigger: "button"
      });
      updateDebugInfo("Widget configurado para abertura por bot√£o");
    }

    function destroyAllWidgets() {
      if (typeof ChatWidget !== 'undefined') {
        ChatWidget.destroyAllWidgets();
        currentWidget = null;
        updateDebugInfo("Todos os widgets foram destru√≠dos");
      }
    }

    // Inicializa com abertura por bot√£o por padr√£o
    window.addEventListener('load', () => {
      initButtonWidget();
    });
  </script>
</body>

</html>